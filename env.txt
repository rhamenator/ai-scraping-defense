# Environment variables for AI Scraping Defense Stack

# Service Ports
AI_SERVICE_PORT=8000
ESCALATION_ENGINE_PORT=8003
TARPIT_API_PORT=8005
ADMIN_UI_PORT=5002
MOCK_EXTERNAL_API_PORT=8010
MOCK_IP_REPUTATION_PORT=8004
MOCK_BLOCKLIST_API_PORT=8002

NGINX_HTTP_PORT=8080
NGINX_HTTPS_PORT=8443

# Application Settings
APP_ENV=production
DEBUG=false
FLASK_ENV=production
UVICORN_WORKERS=2
UVICORN_LOG_LEVEL=info

# Database Configuration
DATABASE_URL=postgresql+asyncpg://user:password@db:5432/ai_defense_db

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379

# AI Model Configuration
AI_MODEL_NAME=gpt-3.5-turbo
AI_MAX_TOKENS=1500
AI_TEMPERATURE=0.7

# Escalation Engine Configuration
ESCALATION_THRESHOLD=0.8
ESCALATION_CHECK_INTERVAL=60  # in seconds

# Admin UI Configuration
ADMIN_UI_USERNAME=admin
ADMIN_UI_PASSWORD_FILE=/run/secrets/admin_ui_password.txt
# ADMIN_UI_2FA_SECRET can be set to require a TOTP code via the X-2FA-Code header
ADMIN_UI_2FA_SECRET=

# Logging Configuration
LOG_LEVEL=INFO

# SMTP Configuration
ALERT_SMTP_HOST=mailhog
ALERT_SMTP_PORT=1025
ALERT_SMTP_WEB_PORT=8025
ALERT_SMTP_USE_TLS=false
ALERT_SMTP_USER=
ALERT_SMTP_PASSWORD_FILE=/run/secrets/smtp_password.txt

# Markov Chain Configuration
WIKIPEDIA_CORPUS_FILE=/app/data/wikipedia_corpus.txt

# Mock External API Configuration
USE_MOCK_EXTERNAL_API=true
EXTERNAL_API_URL=http://mock_external_api:8000
IP_REPUTATION_API_URL=http://mock_ip_reputation_api:8000
COMMUNITY_BLOCKLIST_API_URL=http://mock_community_blocklist_api:8000
EXTERNAL_API_KEY_FILE=/run/secrets/external_api_key.txt
EXTERNAL_API_TIMEOUT=15.0
EXTERNAL_API_RATE_LIMIT_PER_MINUTE=60
EXTERNAL_API_FAILURE_RATE=0.1  # 10% failure rate for testing
EXTERNAL_API_LATENCY_MEAN_MS=200
EXTERNAL_API_LATENCY_STDDEV_MS=50
EXTERNAL_API_RANDOM_ERRORS=true
EXTERNAL_API_RANDOM_LATENCY=true
EXTERNAL_API_RANDOM_RESPONSES=true
EXTERNAL_API_RANDOM_RESPONSES_PROBABILITY=0.05  # 5% chance of random response
EXTERNAL_API_RANDOM_RESPONSES_FILE=/app/data/random_responses.txt
EXTERNAL_API_RANDOM_RESPONSES_STATUS_CODES=200,400,403,429,500
EXTERNAL_API_RANDOM_RESPONSES_STATUS_CODES_PROBABILITIES=0.7,0.1,0.1,0.05,0.05
EXTERNAL_API_RANDOM_RESPONSES_BODIES_FILE=/app/data/random_response_bodies.txt
EXTERNAL_API_RANDOM_RESPONSES_BODIES_PROBABILITIES=0.5,0.3,0.2
EXTERNAL_API_RANDOM_RESPONSES_BODIES_STATUS_CODES=200,400,403
EXTERNAL_API_RANDOM_RESPONSES_BODIES_STATUS_CODES_PROBABILITIES=0.7,0.2,0.1
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_MEAN_MS=100
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_STDDEV_MS=20
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_PROBABILITY=0.1  # 10% chance of delay
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_STATUS_CODES=200,400,403
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_STATUS_CODES_PROBABILITIES=0.7,0.2,0.1
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_MEAN_MS=100
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_STDDEV_MS=20
EXTERNAL_API_RANDOM_RESPONSES_BODIES_DELAY_PROBABILITY=0.1
