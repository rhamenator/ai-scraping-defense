# .env file for AI Scraping Defense Stack Configuration
# Rename this file from .env.sample to .env and fill in your values
# Add this file to your .gitignore!

# --- Redis Configuration (Shared by multiple services) ---
REDIS_HOST=redis
REDIS_PORT=6379
# Optional Redis Password (if configured on Redis server)
# REDIS_PASSWORD=your_redis_password
# Specific DB Indexes (Optional, defaults are set in code)
# REDIS_DB_TAR PIT=1
# REDIS_DB_BLOCKLIST=2
# REDIS_DB_FREQUENCY=3

# --- Escalation Engine Configuration ---
# Select ONE local LLM API endpoint type
LOCAL_LLM_API_URL=http://host.docker.internal:11434/v1/chat/completions # Example: Ollama running on HOST Docker Desktop
# LOCAL_LLM_API_URL=http://ollama_server:11434/v1/chat/completions # Example: Ollama running in Docker container named 'ollama_server'
# LOCAL_LLM_API_URL=http://lmstudio_server:1234/v1/chat/completions # Example: LM Studio running in Docker container named 'lmstudio_server'
LOCAL_LLM_MODEL=llama3:8b # Example: Model loaded in the local server
LOCAL_LLM_TIMEOUT=45.0

# External API (Optional)
EXTERNAL_CLASSIFICATION_API_URL=
EXTERNAL_CLASSIFICATION_API_KEY= # Use Docker Secrets for production

# Webhook URL for AI Service (Receives escalation alerts)
ESCALATION_WEBHOOK_URL=http://ai_service:8000/analyze

# --- AI Service / Webhook Receiver Configuration ---
# Alerting Method: Choose 'webhook', 'slack', 'smtp', or 'none'
ALERT_METHOD=none
# Generic Webhook URL (if ALERT_METHOD=webhook)
ALERT_GENERIC_WEBHOOK_URL=
# Slack Incoming Webhook URL (if ALERT_METHOD=slack)
ALERT_SLACK_WEBHOOK_URL=
# SMTP Configuration (if ALERT_METHOD=smtp)
ALERT_SMTP_HOST=smtp.example.com
ALERT_SMTP_PORT=587
ALERT_SMTP_USE_TLS=true
ALERT_EMAIL_FROM=alert-sender@example.com
ALERT_EMAIL_TO=admin1@example.com,admin2@example.com # Comma-separated
ALERT_SMTP_USER=alert-sender@example.com
ALERT_SMTP_PASSWORD=your_smtp_password # Use Docker Secrets for production
# Minimum severity reason to trigger alert
ALERT_MIN_REASON_SEVERITY=Local LLM

# --- Tarpit API Configuration ---
# TAR PIT_FLAG_TTL=300 # Optional: Override default TTL for IP flagging in Redis

# --- Training Script Configuration ---
# Note: These are typically not needed at runtime unless training is part of deployment
# LOG_FILE_PATH=/app/data/apache_access.log # Path inside container if different
# ROBOTS_TXT_PATH=/app/config/robots.txt # Path inside container

# --- Other Configs ---
# Add any other environment variables your services might need