# problem_file_map.json Schema

This document describes the structure and semantics of `problem_file_map.json`. The file is a lookup table that inventories detected issues in the codebase and records guidance on how to address them.

## Top-Level Structure

- The root JSON value is an object (dictionary) where each key is a human-readable problem identifier, for example `"Missing Circuit Breaker Pattern"`.
- Each key maps to a record object that carries metadata about the problem and the recommended remediation steps.

## Record Fields

| Field | Type | Description | Representative Values |
| --- | --- | --- | --- |
| `original_affected` | array of strings | File paths, path segments, or short notes describing the locations that originally triggered the finding. Entries may include line ranges (e.g. `"src/escalation/escalation_engine.py:45-67"`) or broader context strings such as `"Service-to-service calls throughout"`. | `["src/shared/http_client.py", "External service integrations"]` |
| `resolved_files` | array of strings | Files that should be updated or introduced to remediate the problem. Paths are relative to the repository root and can include documentation or infrastructure assets. The array may be empty when remediation targets are unknown. | `["src/shared/http_client.py", "docker-compose.yaml"]` |
| `category` | string | High-level classification of the problem. Observed categories include `Architecture`, `Security`, `Performance`, `Operations`, `Code Quality`, and `Compliance`. | `"Security"` |
| `fix_prompt` | string | Human-readable instructions summarizing the desired fix, often including architectural patterns or technology suggestions. | `"Implement circuit breaker pattern ..."` |
| `severity` | string | Severity label for prioritisation. Current values are `High`, `Medium`, and `Low`. | `"High"` |
| `confidence` | number | Confidence score (float) that the finding is valid. The dataset currently uses values between 0.70 and 1.00. | `0.8` |
| `pr_created` | boolean | Indicates whether a pull request has already been created for the remediation. Presently all entries are `false`, but the field is reserved for future tracking. | `false` |
| `pr_number` | integer or null | Identifier of the associated pull request when `pr_created` is `true`. The field is `null` for unresolved items. | `null` |

## Additional Notes

- Problem identifiers are unique within the map and usually correspond to concise descriptions of architectural or operational anti-patterns.
- Lists are maintained in priority order, with higher impact files commonly appearing near the top of each array.
- The schema is intentionally simple to support downstream tooling such as report generators or fix planners.
