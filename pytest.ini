[pytest]
# Pytest configuration for ai-scraping-defense

# Test discovery paths
testpaths = test

# Filter out deprecation warning from google-genai dependency
# This is a known issue (https://github.com/googleapis/python-genai/issues/1579)
# where google-genai uses @model_validator(mode="after") on classmethods,
# which is deprecated in Pydantic 2.12+. The warning will be resolved when
# google-genai updates to use instance methods instead of classmethods.
# Until then, we suppress the warning to avoid polluting test output.
#
# The exact warning message from Pydantic 2.12+ is:
# "Using '@model_validator' with mode='after' on a classmethod is deprecated."
filterwarnings =
    ignore:^Using '@model_validator' with mode='after' on a classmethod is deprecated\.:DeprecationWarning:google.genai
    ignore:^Using '@model_validator' with mode='after' on a classmethod is deprecated\.:pydantic.warnings.PydanticDeprecatedSince212:google.genai
